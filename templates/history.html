{% extends "base.html" %}

{% block content %}
<div class="history-container">
    <h1>Historique des quêtes</h1>
    
    {% if completions %}
    <div class="history-table-container">
        <table class="history-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Quête</th>
                    <th>Récompense</th>
                </tr>
            </thead>
            <tbody>
                {% for completion in completions %}
                <tr>
                    <td>{{ completion.completed_at.strftime('%d/%m/%Y %H:%M') }}</td>
                    <td>{{ completion.quest.title }}</td>
                    <td class="reward-cell">+{{ "%.2f"|format(completion.reward) }}€</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="history-summary">
        <p>Total des gains: <strong>{{ "%.2f"|format(completions|sum(attribute='reward')) }}€</strong></p>
    </div>
    {% else %}
    <div class="empty-state">
        <p>Vous n'avez pas encore complété de quêtes.</p>
        <a href="{{ url_for('dashboard') }}" class="btn btn-primary">Voir les quêtes</a>
    </div>
    {% endif %}
    
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline">Retour au tableau de bord</a>
</div>
{% endblock %}
