{% extends "base.html" %}

{% block content %}
<div class="deposit-container">
    <h1>Gérer votre argent</h1>
    
    <div class="deposit-grid">
        <div class="deposit-card">
            <h2>Ajouter de l'argent au solde</h2>
            <p class="current-value">Solde actuel: {{ "%.2f"|format(current_user.balance) }}€</p>
            <form method="POST" action="{{ url_for('add_balance') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="form-group">
                    <label for="amount">Montant à ajouter</label>
                    <input type="number" id="add-amount" name="amount" step="0.01" min="1" required placeholder="100.00">
                </div>
                <button type="submit" class="btn btn-secondary btn-full">Ajouter au solde</button>
            </form>
        </div>
        
        <div class="deposit-card">
            <h2>Faire un dépôt pour les quêtes</h2>
            <p class="current-value">Dépôt actuel: {{ "%.2f"|format(current_user.deposit) }}€</p>
            <p class="deposit-info">Le dépôt détermine vos gains: 50% de ce montant par quête complétée!</p>
            <form method="POST" action="{{ url_for('deposit') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="form-group">
                    <label for="amount">Montant à déposer (depuis votre solde)</label>
                    <input type="number" id="deposit-amount" name="amount" step="0.01" min="1" max="{{ current_user.balance }}" required placeholder="50.00">
                </div>
                <button type="submit" class="btn btn-primary btn-full" {% if current_user.balance <= 0 %}disabled{% endif %}>
                    Effectuer le dépôt
                </button>
            </form>
            {% if current_user.balance <= 0 %}
            <p class="deposit-warning">Ajoutez d'abord de l'argent à votre solde</p>
            {% endif %}
        </div>
    </div>
    
    <div class="deposit-info-section">
        <h3>Comment fonctionnent les gains?</h3>
        <ul>
            <li>Vous déposez un montant de votre choix</li>
            <li>Chaque quête complétée vous rapporte 50% de ce dépôt</li>
            <li>Vous pouvez compléter jusqu'à 4 quêtes par jour</li>
            <li>Exemple: Dépôt de 100€ = 50€ par quête = 200€ max par jour!</li>
        </ul>
    </div>
    
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline">Retour aux quêtes</a>
</div>
{% endblock %}
